<!DOCTYPE HTML>
<html>
<head>
<script id="allmobilize" charset="utf-8" src="<?=Yii::$app->request->baseUrl?>/frontend/web/style/js/allmobilize.min.js"></script>
<meta http-equiv="Cache-Control" content="no-siteapp" />
<link rel="alternate" media="handheld"  />
<!-- end 云适配 -->
<meta http-equiv="Content-Type" content="text/html; charset=utf-8">
<title>登录-会聘网-最专业的IT互联网招聘平台</title>
<meta property="qc:admins" content="23635710066417756375" />
<meta content="会聘网是IT互联网领域招聘网" name="description">
<meta name="baidu-site-verification" content="QIQ6KC1oZ6" />
    <style>
        #yan{
            display:block;
            margin:5px 0 10px 0;
            font-size:14px;
            color:#ff6a6a;
            text-align:left;
            padding-left:20px;
            line-height:22px;}

        #yan_input{
            display:block;
            margin:5px 0 10px 0;
            font-size:14px;
            text-align:left;
            padding-left:20px;
            line-height:22px;}
    </style>
<!-- <div class="web_root"  style="display:none">h</div> -->
<script type="text/javascript">
var ctx = "h";
console.log(1);
</script>
<link rel="Shortcut Icon" href="h/images/favicon.ico">
<link rel="stylesheet" type="text/css" href="<?=Yii::$app->request->baseUrl?>/frontend/web/style/css/style.css"/>

<script src="<?=Yii::$app->request->baseUrl?>/frontend/web/style/js/jquery.1.10.1.min.js" type="text/javascript"></script>

<script type="text/javascript" src="<?=Yii::$app->request->baseUrl?>/frontend/web/style/js/jquery.lib.min.js"></script>
<script type="text/javascript" src="<?=Yii::$app->request->baseUrl?>/frontend/web/style/js/core.min.js"></script>


<script type="text/javascript">
var youdao_conv_id = 271546; 
</script> 
<script type="text/javascript" src="<?=Yii::$app->request->baseUrl?>/frontend/web/style/js/conv.js"></script>
</head>

<body id="login_bg">

	<div class="login_wrapper">
		<div class="login_header">
        	<a href="h/"><img src="<?=Yii::$app->request->baseUrl?>/frontend/web/style/images/logo_white.png" width="285" height="62" alt="会聘招聘" /></a>
            <div id="cloud_s"><img src="<?=Yii::$app->request->baseUrl?>/frontend/web/style/images/cloud_s.png" width="81" height="52" alt="cloud" /></div>
            <div id="cloud_m"><img src="<?=Yii::$app->request->baseUrl?>/frontend/web/style/images/cloud_m.png" width="136" height="95"  alt="cloud" /></div>
        </div>
        
    	<input type="hidden" id="resubmitToken" value="" />		
		 <div class="login_box">
        	<form id="loginForm" action="index.php?r=login/logining" method="post">
                <ul class="register_radio clearfix">
                    <li>
                        找工作
                        <input type="radio" value="person" name="sel"/>
                    </li>
                    <li>
                        招人
                        <input type="radio" value="company" name="sel"/>
                    </li>
                </ul>
                <input type="text" id="email" name="email"  tabindex="1" placeholder="请输入邮箱"  />
			  	<input type="password" id="password" name="password" tabindex="2" placeholder="请输入密码"  />
                <span class="yan"><input type="text" id="yan_code" name="yan_code" style="width: 150px;font-size:15px;color: #646464" placeholder="验证码"  />
                    <img src="index.php?r=login/yanzhen" alt="" onclick="this.src='index.php?r=login/yanzhen&'+Math.random()" width="100" height="30" id="img"/></span>
                <span class="yan" id="yan"></span>
                <span class="error" style="display:none;" id="beError"></span>
			   <label class="fl" for="remember"><input type="checkbox" id="remember" value="" checked="checked" name="autoLogin" /> 记住我</label>
			    <a href="reset.html" class="fr" target="_blank">忘记密码？</a>
			    
				<!--<input type="submit" id="submitLogin" value="登 &nbsp; &nbsp; 录" />?r=index/index-->
				<a style="color:#fff;" href="javascript:void(0)" class="submitLogin" title="登 &nbsp; &nbsp; 录" id="login"/>登 &nbsp; &nbsp; 录</a>

                <input type="hidden" name="form" value="form"/>
			    <input type="hidden" id="callback" name="callback" value=""/>
                <input type="hidden" id="authType" name="authType" value=""/>
                <input type="hidden" id="signature" name="signature" value=""/>
                <input type="hidden" id="timestamp" name="timestamp" value=""/>
			</form>
			<div class="login_right">
				<div>还没有会聘帐号？</div>
				<a  href="index.php?r=login/register"  class="registor_now">立即注册</a>

			    <div class="login_others">使用以下帐号直接登录:</div>
			    <a  href="h/ologin/auth/sina.html"  target="_blank" class="icon_wb" title="使用新浪微博帐号登录"></a>
			    <a  href="h/ologin/auth/qq.html"  class="icon_qq" target="_blank" title="使用腾讯QQ帐号登录"></a>
			</div>
        </div>
        <div class="login_box_btm"></div>
    </div>
    <meta property="qc:admins" content="1444535414635110166375" />
<script type="text/javascript">

    $(document).ready(function(e) {
        $('.register_radio li input').click(function (e) {
            $(this).parent('li').addClass('current').append('<em></em>').siblings().removeClass('current').find('em').remove();
        });
    });


$(function(){
    //文本框失去焦点事件
    $("#email").blur(function () {
        $("#beError").hide()
    })
    $("#password").blur(function () {
        $("#beError").hide()
    })
    $("#yan_code").blur(function () {
        $("#beError").hide()
    })

	//验证表单
    $("#login").click(function(){
        //获取文本框内容
        var email =   $('#email').val()
        var password =   $('#password').val()
        //验证用户名
        var reg_name=/^([a-zA-Z0-9_\.\-])+\@(([a-zA-Z0-9\-])+\.)+([a-zA-Z0-9]{2,4})+$/
        if(email==""){
            $("#beError").html("请输入邮箱");
            $("#beError").show();return;
        }
        if(!reg_name.test(email)){
            $("#beError").html("邮箱类型错误");
            $("#beError").show();return;
        }
        if(password==""){
            $("#beError").html("请输入密码");
            $("#beError").show();return;
        }
        var re_pwd=/^\w{6,18}$/
        if(!re_pwd.test(password)){
            $("#beError").html("密码类型为6-18位的字母、数字或下划线");
            $("#beError").show();return;
        }
        var zhi=$(":radio").length;
        var radio=document.getElementsByName('sel');
        var j=0;
        for(var i=0;i<zhi;i++){
            if(radio[i].checked==true){
                j=radio[i].value;
            }
        }
        if(!j){
            $("#beError").html("请选择登陆快聘网目的");
            $("#beError").show();return;
        }
        /*验证密码*/
        else{
            var yan_code =   $('#yan_code').val()

            $.post('index.php?r=login/yan_code',{yan_code:yan_code}, function (y) {
                if(y==1){
                    $.post('index.php?r=login/logining',{sel:j,email:email,password:password,yan_code:yan_code}, function (msg) {
                        if(msg==1){
                            $("#beError").html("邮箱为空")
                            $("#beError").show()
                        }
                        if(msg==2){
                            $("#beError").html("密码为空")
                            $("#beError").show()
                        }
                        if(msg==3){
                            $("#beError").html("邮箱类型错误")
                            $("#beError").show()
                        }
                        if(msg==4){
                            $("#beError").html("密码类型错误")
                            $("#beError").show()
                        }
//                        alert(msg);
                        if(msg==5){
                            location.href='index.php?r=index/index'
                        }
                        if(msg==6){
                            $("#beError").html("邮箱或密码错误")
                            $("#beError").show()
                        }
                        if(msg==7){
                            $("#beError").html("验证码错误")
                            $("#beError").show()
                        }
                    })
                }else{
                    $("#beError").html("验证码错误")
                    $("#img").attr('src','index.php?r=login/yanzhen&'+Math.random())//验证码错后变换验证码
                    $("#beError").show()
                }

            })
        }

    })
//	 	$("#loginForm").validate({
//	 		/* onkeyup: false,
//	    	focusCleanup:true, */
//	        rules: {
//	    	   	email: {
//	    	    	required: true,
//	    	    	email: true
//	    	   	},
//	    	   	password: {
//	    	    	required: true
//	    	   	}
//	    	},
//	    	messages: {
//	    	   	email: {
//	    	    	required: "请输入登录邮箱地址",
//	    	    	email: "请输入有效的邮箱地址，如：vivi@lagou.com"
//	    	   	},
//	    	   	password: {
//	    	    	required: "请输入密码"
//	    	   	}
//	    	},
//	    	submitHandler:function(form){
//	    		if($('#remember').prop("checked")){
//	      			$('#remember').val(1);
//	      		}else{
//	      			$('#remember').val(null);
//	      		}
//	    		var email = $('#email').val();
//	    		var password = $('#password').val();
//	    		var remember = $('#remember').val();
//
//	    		var callback = $('#callback').val();
//	    		var authType = $('#authType').val();
//	    		var signature = $('#signature').val();
//	    		var timestamp = $('#timestamp').val();
//
//	    		$(form).find(":submit").attr("disabled", true);
//	            $.ajax({
//	            	type:'POST',
//	            	data:{email:email,password:password,autoLogin:remember, callback:callback, authType:authType, signature:signature, timestamp:timestamp},
//	            	url:ctx+'/user/login.json'
//	            }).done(function(result) {
//					if(result.success){
//					 	if(result.content.loginToUrl){
//							window.location.href=result.content.loginToUrl;
//	            		}else{
//	            			window.location.href=ctx+'/';
//	            		}
//					}else{
//						$('#beError').text(result.msg).show();
//					}
//					$(form).find(":submit").attr("disabled", false);
//	            });
//	        }
//		});
})
</script>
</body>
</html>